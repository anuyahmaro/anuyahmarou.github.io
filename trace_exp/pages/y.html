<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/css/style3.css" />
    <link rel="stylesheet" type="text/css" href="../static/css/myStyles2.css" />

</head>




<body>

<ul id="target_artifacts" class="collapsible content-panel-style target_list">
    <!--<li class="each_target_artifact">-->
        <!--<div class="collapsible-header">-->
            <!--<div class = "targ_artifact_info" style="position: relative;">-->
                <!--<a class="targ_art_name waves-effect waves-light blue-grey lighten-4 dim-grey-text btn-small artifact-type disabled">Target 1</a>-->

                <!--<p class="art_summary" >-->
                <!--This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself This is a summary of the artifact itself ...-->
            <!--</p>-->


            <!--</div>-->
        <!--</div>-->
        <!--<div class="collapsible-body content"><span>Lorem ipsum dolor sit amet.</span></div>-->
    <!--</li>-->

<!--</ul>-->


<!--<li class="each_target_artifact">-->
<!--<div class="collapsible-header" onclick="collapseFunc()">-->

<!--<div class = "targ_artifact_info" style="position: relative;">-->
<!--<a class="targ_art_name waves-effect waves-light blue-grey lighten-4 dim-grey-text btn-small artifact-type disabled">Target 2</a>-->

<!--<p class="art_summary" >-->

<!--Target 2 summary...-->
<!--</p>-->


<!--</div></div>-->
<!--<div class="collapsible-body content"><span>Lorem ipsum dolor sit amet.</span></div>-->
<!--</li>-->
<!--<li class="each_target_artifact">-->
<!--<div class="collapsible-header" onclick="collapseFunc()">-->
<!--<div class = "targ_artifact_info"  style="position: relative;">-->
<!--<a class="targ_art_name waves-effect waves-light blue-grey lighten-4 dim-grey-text btn-small artifact-type disabled">Target 3</a>-->
<!--<p class="art_summary" >-->
<!--Target 3 summary...-->
<!--</p>-->

<!--</div></div>-->
<!--<div class="collapsible-body content"><span>Lorem ipsum dolor sit amet.</span></div>-->
<!--</li>-->
<!--<li class="each_target_artifact">-->
<!--<div class="collapsible-header" onclick="collapseFunc()">-->
<!--<div class = "targ_artifact_info" style="position: relative;">-->
<!--<a class="targ_art_name waves-effect waves-light blue-grey lighten-4 dim-grey-text btn-small artifact-type disabled">Target 4</a>-->
<!--<p class="art_summary" >-->
<!--Four summary...-->

<!--</div></div>-->
<!--<div class="collapsible-body content"><span>Lorem ipsum dolor sit amet.</span></div>-->
<!--</li>-->
</ul>


<div class="content-panel-style" >
<table class="collapsible">
    <tr class="mim">
        <td width="70%">Alfreds Futterkiste</td>
        <td>
            <p>
                <label>
                    <input name="group1" type="radio" checked />
                    <span>Maybe</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="group1" type="radio" checked />
                    <span>Agree</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="group1" type="radio" checked />
                    <span>Disagree</span>
                </label>
            </p>
        </td>
    </tr>
    <tr class="collapsible-body content">
        <td>This is something</td>
        <td>Another</td>
    </tr>
    <!--<tr>-->
        <!--<td >Alfreds Futterkiste</td>-->

        <!--<td>-->
            <!--<p>-->
                <!--<label>-->
                    <!--<input name="group1" type="radio" checked />-->
                    <!--<span>Maybe</span>-->
                <!--</label>-->
            <!--</p>-->
            <!--<p>-->
                <!--<label>-->
                    <!--<input name="group1" type="radio" checked />-->
                    <!--<span>Agree</span>-->
                <!--</label>-->
            <!--</p>-->
            <!--<p>-->
                <!--<label>-->
                    <!--<input name="group1" type="radio" checked />-->
                    <!--<span>Disagree</span>-->
                <!--</label>-->
            <!--</p>-->
        <!--</td>-->
    <!--</tr>-->
</table>
</div>





</body>
<script src="https://unpkg.com/d3@6.6.1/dist/d3.min.js"></script>
<script>
    var coll = document.getElementsByClassName("collapsible-header");



    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.collapsible');
        var instances = M.Collapsible.init(elems);
    });

function gg() {
    // this.classList.toggle("active");
    console.log(this);
}


    // var collb = document.getElementsByClassName("mim");



    // document.addEventListener('DOMContentLoaded', function() {
    //     var elems = document.querySelectorAll('.collapsible');
    //     var instances = M.Collapsible.init(elems);
    // });

    // for (i = 0; i < coll.length; i++) {
    //     coll[i].addEventListener("click", collapseFunc);
    //
    //     // coll[i].addEventListener("click", d);
    // }


    var coll_g = document.getElementsByClassName("mim");
    for (var i = 0; i < coll_g.length; i++) {
        coll_g[i].addEventListener("click", console.log("hulo"));

        // coll_[i].addEventListener("click", d);
    }






    function drawTargets(data){
        var target_data = data[0].targets;

    var artifact_data = {
        "info": []
    };

    target_data.forEach(function (d) {
        artifact_data["info"].push({"aid": d["id"], "content": d["text"]});

    });

    console.log(artifact_data);
    console.log(target_data);

        var outer_list = d3.select("#target_artifacts")
            .selectAll("li")
            .data(artifact_data['info'])
            .enter()
            .append("li")
            .attr("class", "each_target_artifact");
            // .text("Hello");

        var target_header = outer_list.append("div")
            .attr("class", "collapsible-header");
            // .on("click", console.log(this));

        var TargetArtifactInfo = target_header.append("div")
            .attr("class", "target_artifact_info")
            .style("position", "relative");


            TargetArtifactInfo.append("a")
            .attr("class", "targ_art_name waves-effect waves-light blue-grey lighten-4 dim-grey-text btn-small artifact-type disabled")
            .text(function(d) { return "Target " + d.aid; });

            TargetArtifactInfo.append("p")
                .attr("class", "art_summary")
                .style("display", "block")
                .text(function(d) { return d.content.slice(0, 50)+"..."; })

    var CollapsedContent = outer_list.append("div")
        .attr("class", "collapsible-body content")
        .text(function(d) { return d.content});


    var coll_ = document.getElementsByClassName("collapsible-header");
    for (i = 0; i < coll.length; i++) {
        coll_[i].addEventListener("click", collapseFunc);

        // coll_[i].addEventListener("click", d);
    }


    function collapseFunc() {
        console.log(this);
        this.classList.toggle("active");

        for (var q = 0; q < coll_.length; q++){
            if (coll_[q]===this){
                // console.log(coll_[q]);
                var targetInfo = coll_[q].getElementsByClassName("targ_artifact_info")[0];
                // targetInfo.getElementsByClassName("art_summary")[0].style.display = "block";
                // coll_[q].getElementsByClassName("art_summary")[0].style.display = "block";
                // console.log(coll_[q].getElementsByClassName("art_summary")[0].style.display);

                var content = this.nextElementSibling;



                if (content.style.display === "block") {
                    // console.log("It is closed right now");
                    content.style.display = "none";
                    // console.log(targetInfo.getElementsByClassName("art_summary"))
                    // targetInfo.getElementsByClassName("art_summary")[0].style.display = "block";

                }
                else {
                    console.log("It is open right now");
                    // coll_[q].getElementsByClassName("art_summary")[0].style.display = "none";
                    // targetInfo.getElementsByClassName("art_summary")[0].style.display = "none";


                }
            }
            else { // while the collapsibles are not active, make sure to show their summary
                // var targetInfo2 = coll_[q].getElementsByClassName("targ_artifact_info")[0];
                // targetInfo2.getElementsByClassName("art_summary")[0].style.display = "block";
                // coll_[q].getElementsByClassName("art_summary")[0].style.display = "block";
                coll_[q].classList.remove("active");
            }

        }


    }
    console.log(coll_);

}



    d3.json("artifact.json").then(data => {



        // console.log(data[0].targets);

        drawTargets(data);


    });






    // function mimi() {
    //     this.classList.toggle("active");
    //
    //     for (var q = 0; q < coll.length; q++){
    //         var coll_class_list = coll[q].classList;
    //         if (coll_class_list.contains("active")){
    //             // console.log(coll[q]);
    //             var targetInfo = coll[q].getElementsByClassName("targ_artifact_info")[0];
    //
    //
    //             targetInfo.getElementsByClassName("art_summary")[0].style.display = "block";
    //
    //
    //             var content = this.nextElementSibling;
    //
    //
    //
    //             if (content.style.display === "block") {
    //                 // console.log("It is closed right now");
    //                 content.style.display = "none";
    //                 targetInfo.getElementsByClassName("art_summary")[0].style.display = "block";
    //
    //             }
    //             else {
    //                 console.log("It is open right now");
    //                 targetInfo.getElementsByClassName("art_summary")[0].style.display = "none";
    //
    //                 // this.classList.toggle("active");
    //
    //             }
    //         }
    //         else { // while the collapsibles are not active, make sure to show their summary
    //             var targetInfo2 = coll[q].getElementsByClassName("targ_artifact_info")[0];
    //             this.classList.remove("active");
    //             // console.log("These are not active");
    //
    //
    //             targetInfo2.getElementsByClassName("art_summary")[0].style.display = "block";
    //         }
    //
    //     }
    //
    //
    // }


</script>
</html>